<!DOCTYPE HTML>
<html>
	<head>
		<title>Bab Radio</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<!--<link rel="stylesheet" type="text/css" href="simplegrid.css">-->
		<style type="text/css">

			body {
				background-color: gray;
			}

			.header {
				width : 100%;
				height: 70px;
				position: relative;
			}

			.disk-container {
				display: inline-block;
				float: left;
				width: 40%;
				position: relative;
			}

			.rest-of-content {
				width: 60%;
				float: left;
			}

			#disk {
				position: relative;
				left:-30%;
				max-width: 100%;
				height: auto;
			}

			#stick {
				position: absolute;
				max-height: 100%;
				width : auto;
				z-index: 1;
				left:30%;
				top:-5%;
			}

			.wrapper {
				position: relative;
				max-width: 81%;
				height: auto;
				z-index: 2;
				left:19%;
				cursor: pointer;
			}

			#control {
				max-height: 100%;
				width: auto;
				z-index: 2;
				left:19%;
				cursor: pointer;
				float: left;
			}

			#now {
				background-color: #E9811A;
				width: 0px;
				height: 35px;
				overflow: hidden;
				position: relative;
				padding-left: 1.5%;
				padding-right: 5px;
				top: 10px;
				border: 3px solid black;
				border-radius: 5px;
				border-bottom-left-radius: 20px;
				border-top-left-radius: 20px;
				left: -3px;
				padding-top: 10px;
				white-space: nowrap;
			}
		</style>
	</head>

	<body>
		<div class="header">
			<div class="wrapper">
				<img id="control" src = "pause.png" />
				<div id="now"></div>
			</div>
		</div>
		<div class="disk-container">
			<img id = "stick" src = "stick.png" />
			<img id = "disk" src = "disk.png" />
		</div>

		<div class="rest-of-content">
		<h2>Hello</h2>
		</div>

		<script src="jquery.js"></script>
		<!--<script src="soundmanager2.js"></script>-->
		<script src="jQueryRotate.min.js"></script>
		<script type="text/javascript" src="http://hosted.musesradioplayer.com/mrp.js"></script>
		<script type="text/javascript">
			MRP.insert({
				'url':'http://usa2.fastcast4u.com:3630/stream',
				'codec':'aac',
				'volume':100,
				'autoplay':true,
				'jsevents':true,
				'buffering':5,
				'title':'Bab',
				'wmode':'transparent',
				'skin':'mcclean',
				'width':1,
				'height':1
			});
		</script>
		<script src="jquery.shoutcast.min.js"></script>
		<script type="text/javascript">
		var app = {};

		app.updateCurrentSong = function(title) {
			var $now = $("#now");
			var $title = $("<span><b>Now</b> : " + title + "</span>");
			$now.html($title);

			$now.animate({
				width : $title.outerWidth() + 10 + "px",
				done: function() {
				}
			});
		}
		$(document).ready(function() {

			$.SHOUTcast({
    			host: "usa2.fastcast4u.com",
    			port: 3630,
    			interval: 15000,
				stats: function(){
					app.updateCurrentSong(this.get("songtitle"));
				}
			}).startStats();

			var angle = 0;
			setInterval(function(){
				angle += 3;
				$("#disk").rotate(angle);
			}, 25);

			var state = "playing";

			$("#control").click(function() {
				if(state == "playing") {
					$(this).attr("src", "play.png");
					MRP.stop();
					$("#stick").rotate({
						center : ["58%", "0%"],
						animateTo: -22
					});

					state = "paused";
				}
				else {
					$(this).attr("src", "pause.png");
					$("#stick").rotate({
						center : ["58%", "0%"],
						animateTo: 0,
					});
					MRP.play();

					state = "playing";
				}
			});
		});
		</script>
	</body>
</html>